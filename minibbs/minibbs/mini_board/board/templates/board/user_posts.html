{% extends 'board/base.html' %}
{% load static %}

{% block content %}
  <div class="container mt-4" style="max-width: 800px;">
    
    <!-- プロフィールエリア -->
    <div class="d-flex align-items-center mb-4 p-3 border rounded custom-profile-bg">
      {% if profile.icon %}
        <img src="{{ profile.icon.url }}" alt="プロフィール画像" class="rounded-circle me-3" width="80" height="80">
      {% else %}
        <img src="{% static 'board/images/default_icon.png' %}" alt="デフォルトアイコン" class="rounded-circle me-3" width="80" height="80">
      {% endif %}
      <div>
        <h4 class="mb-1 border-bottom border-secondary">{{ view.kwargs.username }}</h4>
        <p class="mb-0 text-muted">{{ profile.bio|default:"プロフィールは未設定です。" }}</p>

        {% if request.user.is_authenticated and request.user.username == view.kwargs.username %}
          <a href="{% url 'profile_update' %}" class="btn btn-primary btn-sm mt-2">プロフィールを編集</a>
        {% endif %}
      </div>
    </div>
  </div>

  <!-- ユーザーの投稿一覧 -->
  <h5 class="text-center mt-4">{{ view.kwargs.username }}さんの投稿一覧</h5>
  <div class='container mt-4' style='max-width: 1200px;'>
    <div class='d-flex flex-nowrap overflow-auto'>
      {% for post in posts %}
        {% include 'board/post_card.html' %}
      {% empty %}
        <p class="text-center">投稿はありません。</p>
      {% endfor %}
    </div>
  </div>

  {% include 'board/pagination.html' %}

  <!-- 記事一覧へ戻るリンク -->
  <div class="text-center mt-4 mb-5">
    <a href="{% url 'post_list' %}" class="btn btn-secondary">記事一覧へ戻る</a>
  </div>
{% endblock %}
